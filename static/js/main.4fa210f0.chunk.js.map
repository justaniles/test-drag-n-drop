{"version":3,"sources":["components/SortableJsComponent.tsx","components/DraggableJsComponent.tsx","App.tsx","reportWebVitals.js","index.js"],"names":["SortableJsComponent","items","onSortEnd","listRef","useRef","onSortEndRef","useEffect","current","listRefCurrent","sortable","Sortable","create","animation","delay","delayOnTouchOnly","onStart","window","navigator","vibrate","onEnd","oldIndex","newIndex","callback","undefined","console","warn","destroy","className","ref","map","displayName","key","DraggableJsComponent","draggable","sortAnimation","duration","plugins","Plugins","SortAnimation","on","createItem","id","views","App","useState","currentView","setCurrentView","initialItems","i","push","setItems","useCallback","log","itemToMove","newItems","splice","onAddItem","length","onSwitchView","currentViewIndex","indexOf","onClick","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.4fa210f0.chunk.js","sourcesContent":["import Sortable from 'sortablejs';\nimport React, { useEffect, useRef } from 'react';\nimport { ISortableListParams } from '../types';\n\nexport const SortableJsComponent: React.FC<ISortableListParams> = ({\n  items,\n  onSortEnd,\n}: ISortableListParams) => {\n  const listRef = useRef(null);\n\n  // Save ref for use with Sortable callback\n  const onSortEndRef = useRef(onSortEnd);\n  useEffect(() => {\n    onSortEndRef.current = onSortEnd;\n  }, [onSortEnd]);\n\n  useEffect(() => {\n    const listRefCurrent = listRef.current;\n    if (listRefCurrent) {\n      const sortable = Sortable.create(listRefCurrent, {\n        animation: 150,\n        delay: 500,\n        delayOnTouchOnly: true,\n        onStart: () => {\n          window.navigator.vibrate?.(100);\n        },\n        onEnd: ({ oldIndex, newIndex }) => {\n          const callback = onSortEndRef.current;\n          if (!callback || oldIndex === undefined || newIndex === undefined) {\n            console.warn(\n              `Param undefined in Sortable.onEnd. callback defined: ${!!callback}, oldIndex: ${oldIndex}, newIndex: ${newIndex}`\n            );\n            return;\n          }\n\n          callback({\n            oldIndex,\n            newIndex,\n          });\n        },\n      });\n      return () => {\n        sortable.destroy();\n      };\n    }\n  });\n\n  return (\n    <ol className=\"list\" ref={listRef}>\n      {items.map(({ displayName, key }) => (\n        <li className=\"list-item\" key={key}>\n          <div className=\"item sortablejs-item\">{displayName}</div>\n        </li>\n      ))}\n    </ol>\n  );\n};\n","import { Sortable, Plugins, SortableStopEvent } from '@shopify/draggable';\nimport React, { useEffect, useRef } from 'react';\nimport { ISortableListParams } from '../types';\n\nexport const DraggableJsComponent: React.FC<ISortableListParams> = ({\n  items,\n  onSortEnd,\n}: ISortableListParams) => {\n  const listRef = useRef<HTMLOListElement>(null);\n\n  // Save ref for use with Sortable callback\n  const onSortEndRef = useRef(onSortEnd);\n  useEffect(() => {\n    onSortEndRef.current = onSortEnd;\n  }, [onSortEnd]);\n\n  useEffect(() => {\n    const listRefCurrent = listRef.current;\n    if (listRefCurrent) {\n      const sortable = new Sortable(listRefCurrent, {\n        draggable: '.list-item',\n        sortAnimation: {\n          duration: 150,\n        },\n        plugins: [Plugins.SortAnimation],\n      });\n      sortable.on(\n        'sortable:stop',\n        ({ oldIndex, newIndex }: SortableStopEvent) => {\n          const callback = onSortEndRef.current;\n          if (!callback) {\n            console.warn('No onSortEnd callback defined');\n            return;\n          }\n\n          callback({\n            oldIndex,\n            newIndex,\n          });\n        }\n      );\n      return () => {\n        sortable.destroy();\n      };\n    }\n  }, []);\n\n  return (\n    <ol className=\"list\" ref={listRef}>\n      {items.map(({ displayName, key }) => (\n        <li className=\"list-item\" key={key}>\n          <div className=\"item draggablejs-item\">{displayName}</div>\n        </li>\n      ))}\n    </ol>\n  );\n};\n","import './App.scss';\nimport React, { useCallback, useState } from 'react';\nimport { SortableJsComponent, DraggableJsComponent } from './components';\nimport { IItem, ISortEvent } from './types';\n\nconst itemCount = 50;\n\nfunction createItem(id: number): IItem {\n  return {\n    key: '' + id,\n    displayName: `Item ${id}`,\n  };\n}\n\ntype Views = 'SortableJS' | 'DraggableJS';\nconst views: Views[] = ['SortableJS', 'DraggableJS'];\n\nfunction App() {\n  const [currentView, setCurrentView] = useState<'SortableJS' | 'DraggableJS'>(\n    views[0]\n  );\n\n  const [items, setItems] = useState<IItem[]>(() => {\n    const initialItems: IItem[] = [];\n    for (let i = 0; i < itemCount; i++) {\n      initialItems.push(createItem(i));\n    }\n    return initialItems;\n  });\n\n  const onSortEnd = useCallback(\n    ({ oldIndex, newIndex }: ISortEvent) => {\n      console.log(`Old index: ${oldIndex}, New index: ${newIndex}`);\n      if (oldIndex !== newIndex) {\n        // Update items order\n        const itemToMove = items[oldIndex];\n        if (!itemToMove) {\n          console.warn(\"Can't find item to move at old index \", oldIndex);\n          return;\n        }\n\n        const newItems = [...items];\n        newItems.splice(oldIndex, 1);\n        newItems.splice(newIndex, 0, itemToMove);\n        setItems(newItems);\n      }\n    },\n    [items, setItems]\n  );\n\n  const onAddItem = useCallback(() => {\n    setItems([...items, createItem(items.length)]);\n  }, [items, setItems]);\n\n  const onSwitchView = useCallback(() => {\n    const currentViewIndex = views.indexOf(currentView);\n    if (currentViewIndex === -1) {\n      console.warn(\n        `Unknown currentView '${currentView}'. Defaulting to first view.`\n      );\n      setCurrentView(views[0]);\n      return;\n    }\n\n    const newIndex = (currentViewIndex + 1) % views.length;\n    setCurrentView(views[newIndex]);\n  }, [currentView]);\n\n  console.log(items);\n\n  return (\n    <div className=\"App\">\n      <header className=\"app-header\">\n        <h1 className=\"app-header-current-view\">{currentView}</h1>\n        <div className=\"app-header-right\">\n          <button className=\"button\" onClick={onSwitchView}>\n            Switch view\n          </button>\n          <button className=\"button\" onClick={onAddItem}>\n            Add item\n          </button>\n        </div>\n      </header>\n      {currentView === 'SortableJS' && (\n        <SortableJsComponent items={items} onSortEnd={onSortEnd} />\n      )}\n      {currentView === 'DraggableJS' && (\n        <DraggableJsComponent items={items} onSortEnd={onSortEnd} />\n      )}\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}